// Função para gerar cores dinâmicas suaves
function dynamicColor(baseColor, intensity = 0.1) {
    const c = parseInt(baseColor.replace("#",""),16);
    const r = Math.min(255, ((c >> 16) & 0xff) + Math.floor(Math.random()*255*intensity));
    const g = Math.min(255, ((c >> 8) & 0xff) + Math.floor(Math.random()*255*intensity));
    const b = Math.min(255, (c & 0xff) + Math.floor(Math.random()*255*intensity));
    return `rgb(${r},${g},${b})`;
}

// Atualiza visual dos posts
function renderBlogVisual() {
    const container = document.getElementById("blog-list");
    if(!container) return;
    container.innerHTML = "";

    humanIA.posts.forEach(post => {
        const div = document.createElement("div");
        div.classList.add("blog-post", "transition", "duration-500", "p-4", "rounded-lg", "shadow-lg", "mb-6");
        
        // Cor e sombra dinâmica
        const bgColor = dynamicColor("#EDE9FE", 0.08); // violeta claro base
        div.style.backgroundColor = bgColor;
        div.style.boxShadow = `0 0 ${Math.floor(Math.random()*20+10)}px rgba(109,40,217,0.3)`;

        div.innerHTML = `
            <h3 class="font-bold text-xl mb-2">${post.title}</h3>
            <small class="text-gray-700">${post.tag} - ${post.date} | Dala</small>
            <p class="mt-2">${post.summary || post.content.substring(0,120)}...</p>
            <button onclick="navigateTo('post-detail','${post.id}')" class="mt-2 px-4 py-2 rounded-full bg-violet-600 text-white hover:bg-violet-700 transition duration-300">Ler Mais</button>
            <div class="ia-activity mt-2 text-sm text-green-600 italic">IA está refletindo neste post...</div>
        `;
        container.appendChild(div);

        // animação leve para mostrar atividade da IA
        const activity = div.querySelector(".ia-activity");
        setInterval(() => {
            activity.style.opacity = Math.random() > 0.5 ? "1" : "0.4";
        }, 1000 + Math.random()*2000);
    });
}

// Inicializa visual vivo
setInterval(() => {
    humanIA.evolvePosts();
    renderBlogVisual();
}, 30000);

// Chamada inicial
window.onload = () => {
    renderBlogVisual();
    const initialPage = window.location.hash ? window.location.hash.substring(1) : "home";
    navigateTo(initialPage);
};
